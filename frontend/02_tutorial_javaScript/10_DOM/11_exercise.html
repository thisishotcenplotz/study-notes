<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>练习-checkbox</title>
</head>
<body>
  <div>
    <form action="#">
      <div>
        请选择你的爱好：
        <input type="checkbox" id="check-all"> 全选
      </div>
      <div>
        <input type="checkbox" name="hobby" value="抽烟"> 抽烟
        <input type="checkbox" name="hobby" value="喝酒"> 喝酒
        <input type="checkbox" name="hobby" value="烫头"> 烫头
        <input type="checkbox" name="hobby" value="打豆豆"> 打豆豆
      </div>
      <div>
        <button type="button" id="all">全选</button>
        <button type="button" id="no">取消</button>
        <button type="button" id="reverse">反选</button>
        <button type="button" id="send">提交</button>
      </div>
    </form>
  </div>

  <script>
    /*
    * 全选
    * 取消
    * 反选
    * 提交
    * 全选checkbox
    * */

    // 获得四个多选框
    const hobbies = document.getElementsByName('hobby');

    //获得四个按钮
    const allBtn = document.getElementById('all');
    allBtn.addEventListener('click',()=>{
      for (let hobby of hobbies) {
        hobby.checked = true;
        checkAllBox.checked = true;
      }
    });
    const cancelBtn = document.getElementById('no');
    cancelBtn.addEventListener('click',()=>{
      for (let hobby of hobbies) {
        hobby.checked = false;
        checkAllBox.checked = false;
      }
    });
    const reverseBtn = document.getElementById('reverse');
    reverseBtn.addEventListener('click',()=>{
      for (let hobby of hobbies) {
        hobby.checked = !hobby.checked;
      }
      const checkedBox = document.querySelectorAll("[name=hobby]:checked");
        if(hobbies.length === checkedBox.length){
          checkAllBox.checked = true;
        }else{
          checkAllBox.checked = false;
        }
    });
    const sendBtn = document.getElementById('send');
    sendBtn.addEventListener('click',()=>{
      let rst = [];
      for (let hobby of hobbies) {
        if(hobby.checked !== false){
          rst.push(hobby.value.toString())
        }
      }
      alert(rst);
    });
    const checkAllBox = document.getElementById('check-all');
    checkAllBox.addEventListener('change',()=>{
      for (let hobby of hobbies) {
        hobby.checked = checkAllBox.checked;
      }
    });
    for (let i = 0; i < hobbies.length; i++) {
      hobbies[i].onchange = function(){
        const checkedBox = document.querySelectorAll("[name=hobby]:checked");
        if(hobbies.length === checkedBox.length){
          checkAllBox.checked = true;
        }else{
          checkAllBox.checked = false;
        }
      }
    }
  </script>
</body>
</html>